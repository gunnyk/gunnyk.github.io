<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="JavaScript - 가비지 컬렉션(Garbage Collection)" /><meta name="author" content="Gunn Kim" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="가비지 컬렉션" /><meta property="og:description" content="가비지 컬렉션" /><link rel="canonical" href="https://gunnkimkr.github.io/posts/javascript-garbage-collection/" /><meta property="og:url" content="https://gunnkimkr.github.io/posts/javascript-garbage-collection/" /><meta property="og:site_name" content="Gunn’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-14T23:55:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JavaScript - 가비지 컬렉션(Garbage Collection)" /><meta name="google-site-verification" content="yaaNU8tK01DFWa4QQ0P6UQwKJBGuU-rSDS9xt89dZ64" /> <script type="application/ld+json"> {"@type":"BlogPosting","headline":"JavaScript - 가비지 컬렉션(Garbage Collection)","dateModified":"2021-09-19T22:59:53+09:00","datePublished":"2021-08-14T23:55:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://gunnkimkr.github.io/posts/javascript-garbage-collection/"},"author":{"@type":"Person","name":"Gunn Kim"},"description":"가비지 컬렉션","url":"https://gunnkimkr.github.io/posts/javascript-garbage-collection/","@context":"https://schema.org"}</script><title>JavaScript - 가비지 컬렉션(Garbage Collection) | Gunn’s Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Gunn’s Blog"><meta name="application-name" content="Gunn’s Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-0HZ3ZVN0Q7"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-0HZ3ZVN0Q7'); }); </script> <script data-ad-client="ca-pub-6581213997312482" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="ko-KR"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Gunn’s Blog</a></div><div class="site-subtitle font-italic">Recording ideas about&nbsp;tech&nbsp;and&nbsp;life</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/GunnKimKR" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.instagram.com/__okidoki" aria-label="instagram" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['gunnn.kim','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>JavaScript - 가비지 컬렉션(Garbage Collection)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>JavaScript - 가비지 컬렉션(Garbage Collection)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Gunn Kim </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Aug 14, 2021, 11:55 PM +0900" >Aug 14<i class="unloaded">2021-08-14T23:55:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Sep 19, 2021, 10:59 PM +0900" >Sep 19<i class="unloaded">2021-09-19T22:59:53+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2024 words">11 min read</span></div></div><div class="post-content"><h2 id="가비지-컬렉션"><strong>가비지 컬렉션</strong></h2><p>자바스크립트는 실행 환경에서 코드를 실행하는 중에 메모리를 관리하는데, 개발자가 직접 메모리를 관리하지 않아도 자바스크립트는 필요한 메모리를 할당하고 더 이상 사용하지 않는 메모리는 회수한다.</p><p>예를 들어, 함수 내에 선언된 지역 변수는 함수를 실행할 때 생성된다.</p><p>이 지역 변수는 함수의 실행이 마치면 더 이상 사용하지 않게 되고 가비지 컬렉터가 이를 추적해 해당 변수가 차지하고 있던 메모리를 회수한다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span>
<span class="p">};</span>
</pre></table></code></div></div><p>변수 <code class="language-plaintext highlighter-rouge">obj</code>는 <code class="language-plaintext highlighter-rouge">{key: value}</code> 객체가 저장된 메모리를 가리키는 참조 값을 갖는다.</p><p>이 객체가 차지하고 있는 메모리 공간을 변수 <code class="language-plaintext highlighter-rouge">obj</code>가 참조하고 있는 한 가비지 컬렉터는 메모리를 회수하지 않는다.</p><p>하지만 다음과 같은 경우 가비지 컬렉터는 이 객체를 더 이상 사용하지 않는 객체로 판단하고 메모리를 회수한다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">obj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</pre></table></code></div></div><p>변수 <code class="language-plaintext highlighter-rouge">obj</code>에 <code class="language-plaintext highlighter-rouge">null</code>을 할당했으므로 변수 <code class="language-plaintext highlighter-rouge">obj</code>는 객체가 저장된 메모리를 가리키는 참조 값을 잃게 된다.</p><p>이때 어디에서도 이 객체를 참조하고 있지 않다면 가비지 컬렉터는 메모리에 저장된 객체를 더 이상 사용하지 않는 값으로 판단하고 메모리를 회수한다.</p><p>가비지 컬렉터가 가비지 컬렉션을 수행하는 방법에는 다양한 가비지 컬렉션 알고리즘이 존재한다.</p><p>널리 쓰이는 기본적인 가비지 컬렉션 알고리즘엔 Mark-and-Sweep이 있으며, 그 외에 Reference Counting 등이 있다.</p><p>가비지 컬렉션 알고리즘은 브라우저마다 다르다.</p><h2 id="가비지-컬렉션-알고리즘"><strong>가비지 컬렉션 알고리즘</strong></h2><h3 id="reference-counting"><strong>Reference Counting</strong></h3><p>참조 카운팅 방식은 메모리에 저장된 값이 얼마나 참조되었는지를 추적한다.</p><p>변수를 선언하고 참조 값이 할당되면 참조 카운트는 1이 된다.</p><p>다른 변수가 같은 값을 참조하고 있다면 참조 카운트는 1 증가한다. 만약 이 변수에 다른 값을 할당하거나 참조 값을 제거하면 원래 참조하고 있던 값의 참조 카운트가 1 감소한다.</p><p>값의 참조 카운트가 0이 되면 해당 값에 접근할 방법이 없으므로 가비지 컬렉터는 이 메모리를 회수한다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">outerFn</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">objA</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// objA RC 1</span>

  <span class="kd">function</span> <span class="nx">innerFn</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">objB</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">// objB RC 1</span>
    <span class="nx">objA</span><span class="p">.</span><span class="nx">ref</span> <span class="o">=</span> <span class="nx">objB</span><span class="p">;</span> <span class="c1">// objB RC 2</span>
  <span class="p">}</span>
  <span class="nx">innerFn</span><span class="p">();</span>
  <span class="c1">// objB RC 1</span>
<span class="p">}</span>

<span class="nx">outerFn</span><span class="p">();</span>
<span class="c1">// objA RC 0, objB RC 0</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">outerFn</code> 함수 안에 <code class="language-plaintext highlighter-rouge">objA</code> 변수를 선언하고 빈 객체를 할당해 초기화했다. 이때 변수 <code class="language-plaintext highlighter-rouge">objA</code>의 참조 카운트는 1이 된다.</p><p><code class="language-plaintext highlighter-rouge">innerFn</code> 함수 안에는 <code class="language-plaintext highlighter-rouge">objB</code> 변수를 선언하고 빈 객체를 할당해 초기화했다. 그리고 <code class="language-plaintext highlighter-rouge">objA</code>의 프로퍼티에 <code class="language-plaintext highlighter-rouge">objB</code>를 할당해 <code class="language-plaintext highlighter-rouge">objA.ref</code>가 <code class="language-plaintext highlighter-rouge">objB</code>를 참조하도록 했다. <code class="language-plaintext highlighter-rouge">objB</code>와 <code class="language-plaintext highlighter-rouge">objA.ref</code>가 같은 객체를 참조하고 있으므로 <code class="language-plaintext highlighter-rouge">objB</code>의 참조 카운트는 2가 된다.</p><p><code class="language-plaintext highlighter-rouge">innerFn</code> 함수의 실행이 마치면 변수 <code class="language-plaintext highlighter-rouge">objB</code>는 스코프를 벗어나게 되고, 더이상 사용할 수 없으므로 참조 카운트는 1 감소한다.</p><p><code class="language-plaintext highlighter-rouge">outerFn</code> 함수의 실행이 마치면 변수 <code class="language-plaintext highlighter-rouge">objA</code>도 스코프를 벗어나게 되고, 더이상 사용할 수 없으므로 참조 카운트는 0이 된다.</p><p>변수 <code class="language-plaintext highlighter-rouge">objA</code>의 참조 카운트가 0이 되면서 <code class="language-plaintext highlighter-rouge">objA.ref</code>로 참조하던 변수 <code class="language-plaintext highlighter-rouge">objB</code>를 더이상 참조할 수 없게되고 <code class="language-plaintext highlighter-rouge">objB</code>의 참조 카운트도 0이 된다.</p><p>가비지 컬렉터는 참조 카운트가 0이 된 두 객체를 더이상 사용하지 않는 것으로 판단하고 메모리를 회수하게 된다.</p><h4 id="순환-참조"><strong>순환 참조</strong></h4><p>참조 카운팅 방식에서 순환 참조는 메모리 누수의 원인이 된다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">circularRef</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">objA</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// objA RC 1</span>
  <span class="kd">var</span> <span class="nx">objB</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// objB RC 1</span>

  <span class="nx">objA</span><span class="p">.</span><span class="nx">ref</span> <span class="o">=</span> <span class="nx">objB</span><span class="p">;</span> <span class="c1">// objB RC 2</span>
  <span class="nx">objB</span><span class="p">.</span><span class="nx">ref</span> <span class="o">=</span> <span class="nx">objA</span><span class="p">;</span> <span class="c1">// objA RC 2</span>
<span class="p">}</span>
<span class="nx">circularRef</span><span class="p">();</span>
 <span class="c1">// objA RC 1, objB RC 1</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">circularRef</code> 함수를 실행하면 변수 <code class="language-plaintext highlighter-rouge">objA</code>와 <code class="language-plaintext highlighter-rouge">objB</code>가 선언되고 참조 값이 할당되면서 각각 참조 카운트가 1 증가한다.</p><p>그리고 <code class="language-plaintext highlighter-rouge">objA</code>와 <code class="language-plaintext highlighter-rouge">objB</code>는 프로퍼티를 통해 서로를 참조하고 있다.</p><p>이때 참조 카운트가 1 증가하면서 각각의 참조 카운트는 2가 된다.</p><p>함수 실행을 마치면 두 변수 모두 스코프를 벗어났음에도 참조 카운트가 0이 되지 않기 때문에 가비지 컬렉터는 메모리를 회수하지 않는다.</p><p>만약 이 함수가 여러번 호출되면 회수하지 못하고 낭비하는 메모리가 늘어난다.</p><h3 id="mark-and-sweep"><strong>Mark-and-Sweep</strong></h3><p>mark-and-sweep 방식은 roots라는 최상위 객체에서 시작해서 도달할 수 없는 객체에 대해 가비지 컬렉션을 수행한다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">globalA</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">A</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">globalB</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">B</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">globalC</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">refGlobalA</span><span class="p">:</span> <span class="nx">globalA</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">globalFn</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">localA</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">localB</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">;</span>
  <span class="nx">globalC</span><span class="p">.</span><span class="nx">refLocalA</span> <span class="o">=</span> <span class="nx">localA</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">globalFn</span><span class="p">();</span>
</pre></table></code></div></div><p>가비지 컬렉터가 동작하면 먼저 메모리에 저장된 모든 변수에 표시를 남긴다.</p><p>그다음 roots에 속하는 <code class="language-plaintext highlighter-rouge">globalA</code>, <code class="language-plaintext highlighter-rouge">globalB</code>, <code class="language-plaintext highlighter-rouge">globalC</code>, <code class="language-plaintext highlighter-rouge">globalFn</code>부터 도달 가능한 모든 객체를 탐색하며 표시를 지운다.</p><p>위 코드에서 <code class="language-plaintext highlighter-rouge">globalFn</code> 함수의 실행이 마치면 지역 변수 <code class="language-plaintext highlighter-rouge">localA</code>는 <code class="language-plaintext highlighter-rouge">globalC.refLocalA</code>를 통해 roots로부터 도달할 수 있지만 변수 <code class="language-plaintext highlighter-rouge">localB</code>에는 더이상 도달할 수 없게되고 표시가 남아있게 된다.</p><p>가비지 컬렉터는 변수 <code class="language-plaintext highlighter-rouge">localB</code>를 더이상 사용하지 않는 값으로 판단하고 메모리를 회수한다.</p><p>이런 방식은 참조 카운팅 방식의 순환 참조 문제를 해결한다.</p><h2 id="메모리-관리"><strong>메모리 관리</strong></h2><p>웹 브라우저 환경에서 사용할 수 있는 메모리는 일반적인 데스크톱 애플리케이션의 가용 메모리에 비해 매우 적은 편이다.</p><p>웹 브라우저가 적은 양의 가용 메모리를 할당받는 주된 이유는 웹 페이지에서 실행하는 자바스크립트가 시스템 메모리를 전부 사용해서 운영체제가 다운되는 일을 방지하기 위함이다.</p><p>이러한 메모리의 제한은 변수 할당뿐만 아니라 호출 스택, 스레드에서 실행할 수 있는 문장 수에도 영향을 미친다.</p><p>이런 환경에서 웹 페이지의 성능을 최대한으로 향상시킬 수 있는 방법은 코드 실행에 필요한 데이터만 유지하는 것이다.</p><p>더 이상 사용하지 않는 데이터에 <code class="language-plaintext highlighter-rouge">null</code>을 할당해서 참조를 제거하는 것이 좋다.</p><p>지역 변수 같은 경우 컨텍스트를 벗어나면 자동으로 참조가 제거되기 때문에 명시적으로 참조를 제거해줄 필요가 없다.</p><p>변수의 참조를 제거한다고 해서 메모리가 자동으로 반환되는 것은 아니다.</p><p>참조 제거의 요점은 값의 컨텍스트를 없애서 가비지 컬렉터가 이를 추적해 메모리를 회수하도록 하는 것이다.</p><h2 id="각주"><strong>각주</strong></h2><ul><li>Nicholas C. Zakas(2012), “JavaScript for Web Developers”<li>JAVASCRIPT.INFO, <a href="https://ko.javascript.info/garbage-collection">가비지 컬렉션</a><li>MDN Web Docs, <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management">자바스크립트의 메모리관리</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a>, <a href='/categories/javascript/'>JavaScript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >javascript</a> <a href="/tags/garbage-collection/" class="post-tag no-text-decoration" >garbage collection</a> <a href="/tags/garbage-collector/" class="post-tag no-text-decoration" >garbage collector</a> <a href="/tags/garbage-collection-algorithm/" class="post-tag no-text-decoration" >garbage collection algorithm</a> <a href="/tags/reference-counting/" class="post-tag no-text-decoration" >reference counting</a> <a href="/tags/circular-reference/" class="post-tag no-text-decoration" >circular reference</a> <a href="/tags/mark-and-sweep/" class="post-tag no-text-decoration" >mark-and-sweep</a> <a href="/tags/managing-memory/" class="post-tag no-text-decoration" >managing memory</a> <a href="/tags/memory-leaks/" class="post-tag no-text-decoration" >memory leaks</a> <a href="/tags/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/" class="post-tag no-text-decoration" >자바스크립트</a> <a href="/tags/%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%EC%85%98/" class="post-tag no-text-decoration" >가비지 컬렉션</a> <a href="/tags/%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%ED%84%B0/" class="post-tag no-text-decoration" >가비지 컬렉터</a> <a href="/tags/%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%EC%85%98-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/" class="post-tag no-text-decoration" >가비지 컬렉션 알고리즘</a> <a href="/tags/%EC%B0%B8%EC%A1%B0-%EC%B9%B4%EC%9A%B4%ED%8C%85/" class="post-tag no-text-decoration" >참조 카운팅</a> <a href="/tags/%EC%88%9C%ED%99%98-%EC%B0%B8%EC%A1%B0/" class="post-tag no-text-decoration" >순환 참조</a> <a href="/tags/%ED%91%9C%EC%8B%9C%ED%95%98%EA%B3%A0-%EC%A7%80%EC%9A%B0%EA%B8%B0/" class="post-tag no-text-decoration" >표시하고 지우기</a> <a href="/tags/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC/" class="post-tag no-text-decoration" >메모리 관리</a> <a href="/tags/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%88%84%EC%88%98/" class="post-tag no-text-decoration" >메모리 누수</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 게시물은 작성자에 의해 <a href="https://creativecommons.org/licenses/by/2.0/kr/"> CC BY 2.0 KR </a> 에 따라 사용이 허가되었습니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JavaScript - 가비지 컬렉션(Garbage Collection) - Gunn’s Blog&url=https://gunnkimkr.github.io/posts/javascript-garbage-collection/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JavaScript - 가비지 컬렉션(Garbage Collection) - Gunn’s Blog&u=https://gunnkimkr.github.io/posts/javascript-garbage-collection/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=JavaScript - 가비지 컬렉션(Garbage Collection) - Gunn’s Blog&url=https://gunnkimkr.github.io/posts/javascript-garbage-collection/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="URL 복사" title-succeed="URL이 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>최근 업데이트</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/javascript-garbage-collection/">JavaScript - 가비지 컬렉션(Garbage Collection)</a><li><a href="/posts/javascript-dom/">JavaScript - DOM(The Document Object Model)</a><li><a href="/posts/electron-create-an-electron-app/">Electron - 일렉트론 앱 만들기(Create an Electron App)</a></ul></div><div id="access-tags"> <span>인기 태그</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">자바스크립트</a> <a class="post-tag" href="/tags/%EC%9B%90%EC%8B%9C-%EA%B0%92/">원시 값</a> <a class="post-tag" href="/tags/data-types/">data types</a> <a class="post-tag" href="/tags/primitive-values/">primitive values</a> <a class="post-tag" href="/tags/reference-values/">reference values</a> <a class="post-tag" href="/tags/scope-chain/">scope chain</a> <a class="post-tag" href="/tags/scope/">scope</a> <a class="post-tag" href="/tags/%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85/">데이터 타입</a> <a class="post-tag" href="/tags/%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8/">스코프 체인</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">목차</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>다른 게시글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/javascript-primitive-and-reference-values-and-dynamic-properties/"><div class="card-body"> <span class="timeago small" >Jul 7<i class="unloaded">2021-07-07T05:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JavaScript - 원시 값과 참조 값 & 동적 프로퍼티(Primitive and Reference Values & Dynamic Properties)</h3><div class="text-muted small"><p> 원시 값과 참조 값 자바스크립트의 변수에는 원시 값과 참조 값 두 가지 타입의 값을 저장할 수 있다. 원시 값 string, number, bigint, boolean, undefined, symbol, null 참조 값 object 변수에 값이 할당되면 자바스크립트 엔진은 할당된 값이 원시 값인지 참조 값인지 판단하게 되는데 ...</p></div></div></a></div><div class="card"> <a href="/posts/javascript-primitive-and-reference-values-and-copying-values/"><div class="card-body"> <span class="timeago small" >Jul 8<i class="unloaded">2021-07-08T17:50:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JavaScript - 원시 값과 참조 값 & 값 복사(Primitive and Reference Values & Copying Values)</h3><div class="text-muted small"><p> 값 복사 값에 의한 값 복사 let num1 = 5; let num2 = num1; num1 = 10; console.log(num2); // 5 num1에는 5가 저장되어 있다. num1을 num2에 대입하면 num1에 저장된 값 5를 새로 생성한 뒤에 값 복사가 이루어진다. num1과 num2는 각각 독립적인 존재이기 때문에 어느 한쪽에...</p></div></div></a></div><div class="card"> <a href="/posts/javascript-execution-context/"><div class="card-body"> <span class="timeago small" >Jul 17<i class="unloaded">2021-07-17T05:30:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JavaScript - 실행 컨텍스트(Execution Context)</h3><div class="text-muted small"><p> 실행 컨텍스트 실행 컨텍스트는 코드의 런타임 평가를 추적하는 데 사용한다. 즉, 실행 컨텍스트는 자바스크립트 코드가 실행되는 환경을 말하며 코드 실행을 위해 필요한 정보를 담고 있다. 실행 컨텍스트는 추상화된 개념이므로 코드로 직접 접근은 불가능하다. 실행 컨텍스트에는 변수 객체, 스코프 체인, this 값이 있다. 실행 컨텍스트의 종류로는 전...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/javascript-dom/" class="btn btn-outline-primary" prompt="이전"><p>JavaScript - DOM(The Document Object Model)</p></a> <a href="/posts/javascript-data-immutability/" class="btn btn-outline-primary" prompt="다음"><p>JavaScript - 데이터 불변성(Data Immutability)</p></a></div><script src="https://utteranc.es/client.js" repo="GunnKimKR/blog.comments" issue-term="og:title" label="💬Comment" theme="preferred-color-scheme" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/GunnKimKR">Gunn Kim</a>. <span data-toggle="tooltip" data-placement="top" title="이 저작물은 크리에이티브 커먼즈 저작자표시 2.0 대한민국 라이선스에 따라 이용할 수 있습니다.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">인기 태그</h4><a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">자바스크립트</a> <a class="post-tag" href="/tags/%EC%9B%90%EC%8B%9C-%EA%B0%92/">원시 값</a> <a class="post-tag" href="/tags/data-types/">data types</a> <a class="post-tag" href="/tags/primitive-values/">primitive values</a> <a class="post-tag" href="/tags/reference-values/">reference values</a> <a class="post-tag" href="/tags/scope-chain/">scope chain</a> <a class="post-tag" href="/tags/scope/">scope</a> <a class="post-tag" href="/tags/%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85/">데이터 타입</a> <a class="post-tag" href="/tags/%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8/">스코프 체인</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://GunnKimKR.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>
